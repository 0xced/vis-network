<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Vis Network | Data | DOT language playground</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

    <style type="text/css">
      body,
      html {
        font: 10pt sans;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.5em;
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        color: #4d4d4d;
        box-sizing: border-box;
        overflow: hidden;
      }

      #header {
        margin: 0;
        padding-top: 10px;
        padding-left: 10px;
        box-sizing: border-box;
      }

      #contents {
        height: 100%;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        position: relative;
      }

      #left,
      #right {
        position: absolute;
        height: 100%;
        margin: 0;
        padding: 10px;
        box-sizing: border-box;
        display: inline-block;
      }

      #left {
        top: 0;
        left: 0;
        width: 30%;
      }

      #right {
        top: 0;
        right: 0;
        width: 70%;
      }

      #data {
        width: 100%;
        height: 100%;
        border: 1px solid #d3d3d3;
        box-sizing: border-box;
        resize: none;
      }

      #draw {
        padding: 5px 15px;
      }

      #mynetwork {
        width: 100%;
        height: 100%;
        border: 1px solid #d3d3d3;
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <div id="header">
      <button id="draw" title="Draw the DOT graph (Ctrl+Enter)">Draw</button>
    </div>

    <div id="contents">
      <div id="left">
        <textarea id="data"># Generated by https://github.com/0xced/Chisel
digraph
{
  rankdir=LR
  node [ fontname = "Segoe UI, sans-serif", shape = box, style = filled, color = aquamarine ]

  "AWSSDK.Core/3.7.100.14" [ color = lightcoral ]
  "AWSSDK.SecurityToken/3.7.100.14" [ color = lightcoral ]
  "DnsClient/1.6.1"
  "Microsoft.Extensions.DependencyInjection.Abstractions/8.0.0"
  "Microsoft.Extensions.Logging.Abstractions/8.0.0"
  "Microsoft.NETCore.Platforms/5.0.0"
  "Microsoft.Win32.Registry/5.0.0"
  "MongoDB.Bson/2.24.0"
  "MongoDB.Driver.Core/2.24.0"
  "MongoDB.Driver/2.24.0"
  "MongoDB.Libmongocrypt/1.8.2"
  "SharpCompress/0.30.1"
  "Snappier/1.0.0"
  "System.Buffers/4.5.1"
  "System.Memory/4.5.5"
  "System.Runtime.CompilerServices.Unsafe/6.0.0"
  "System.Security.AccessControl/5.0.0"
  "System.Security.Principal.Windows/5.0.0"
  "ZstdSharp.Port/0.7.3"

  "AWSSDK.SecurityToken/3.7.100.14" -> "AWSSDK.Core/3.7.100.14"
  "DnsClient/1.6.1" -> "Microsoft.Win32.Registry/5.0.0"
  "Microsoft.Extensions.Logging.Abstractions/8.0.0" -> "Microsoft.Extensions.DependencyInjection.Abstractions/8.0.0"
  "Microsoft.Win32.Registry/5.0.0" -> "System.Security.AccessControl/5.0.0"
  "Microsoft.Win32.Registry/5.0.0" -> "System.Security.Principal.Windows/5.0.0"
  "MongoDB.Bson/2.24.0" -> "System.Memory/4.5.5"
  "MongoDB.Bson/2.24.0" -> "System.Runtime.CompilerServices.Unsafe/6.0.0"
  "MongoDB.Driver.Core/2.24.0" -> "AWSSDK.SecurityToken/3.7.100.14"
  "MongoDB.Driver.Core/2.24.0" -> "DnsClient/1.6.1"
  "MongoDB.Driver.Core/2.24.0" -> "Microsoft.Extensions.Logging.Abstractions/8.0.0"
  "MongoDB.Driver.Core/2.24.0" -> "MongoDB.Bson/2.24.0"
  "MongoDB.Driver.Core/2.24.0" -> "MongoDB.Libmongocrypt/1.8.2"
  "MongoDB.Driver.Core/2.24.0" -> "SharpCompress/0.30.1"
  "MongoDB.Driver.Core/2.24.0" -> "Snappier/1.0.0"
  "MongoDB.Driver.Core/2.24.0" -> "System.Buffers/4.5.1"
  "MongoDB.Driver.Core/2.24.0" -> "ZstdSharp.Port/0.7.3"
  "MongoDB.Driver/2.24.0" -> "Microsoft.Extensions.Logging.Abstractions/8.0.0"
  "MongoDB.Driver/2.24.0" -> "MongoDB.Bson/2.24.0"
  "MongoDB.Driver/2.24.0" -> "MongoDB.Driver.Core/2.24.0"
  "MongoDB.Driver/2.24.0" -> "MongoDB.Libmongocrypt/1.8.2"
  "System.Security.AccessControl/5.0.0" -> "Microsoft.NETCore.Platforms/5.0.0"
  "System.Security.AccessControl/5.0.0" -> "System.Security.Principal.Windows/5.0.0"
}</textarea>
      </div>
      <div id="right">
        <div id="mynetwork"></div>
      </div>
    </div>

    <script type="text/javascript">
      // create a network
      var container = document.getElementById("mynetwork");
      var options = {
        physics: {
          stabilization: false,
          barnesHut: {
            springLength: 200,
          },
        },
      };
      var data = {};
      var network = new vis.Network(container, data, options);

      $("#draw").click(draw);

      $(window).resize(resize);
      $(window).load(draw);

      $("#data").keydown(function (event) {
        if (event.ctrlKey && event.keyCode === 13) {
          // Ctrl+Enter
          draw();
          event.stopPropagation();
          event.preventDefault();
        }
      });

      function resize() {
        $("#contents").height($("body").height() - $("#header").height() - 30);
      }

      function draw() {
        try {
          resize();

          // Provide a string with data in DOT language
          data = vis.parseDOTNetwork($("#data").val());

          network.setData(data);
        } catch (err) {
          // set the cursor at the position where the error occurred
          var match = /\(char (.*)\)/.exec(err);
          if (match) {
            var pos = Number(match[1]);
            var textarea = $("#data")[0];
            if (textarea.setSelectionRange) {
              textarea.focus();
              textarea.setSelectionRange(pos, pos);
            }
          }
        }
      }
    </script>
  </body>
</html>
